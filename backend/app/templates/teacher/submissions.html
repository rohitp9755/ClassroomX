{% extends "base.html" %}
{% block title %}Submissions â€” ClassroomX{% endblock %}
{% block content %}
<h1 class="text-2xl font-bold mb-4">Submissions for {{ assignment.title }}</h1>
<table class="w-full bg-white rounded border">
  <thead class="bg-gray-50">
    <tr>
      <th class="text-left p-2">Student</th>
      <th class="text-left p-2">Submitted At</th>
      <th class="text-left p-2">Status</th>
      <th class="text-left p-2">Grade</th>
      <th class="text-left p-2">Actions</th>
    </tr>
  </thead>
  <tbody class="divide-y">
    {% for s in assignment.submissions %}
    <tr>
      <td class="p-2">{{ s.student.name }}</td>
      <td class="p-2">{{ s.timestamp.strftime('%Y-%m-%d %H:%M') }}</td>
      <td class="p-2">
        {% if s.status == 'graded' %}
          <span class="px-2 py-1 text-xs rounded bg-green-100 text-green-700">Graded</span>
        {% else %}
          <span class="px-2 py-1 text-xs rounded bg-yellow-100 text-yellow-700">Submitted</span>
        {% endif %}
      </td>
      <td class="p-2">{{ s.grade if s.grade is not none else '-' }}</td>
      <td class="p-2">
        <form method="post" action="/teacher/assignments/{{ assignment.id }}/grade" class="flex items-center gap-2">
          <input type="hidden" name="submission_id" value="{{ s.id }}" />
          <input name="marks" type="number" step="0.01" class="border rounded px-2 py-1 w-28" placeholder="Marks" />
          <button class="bg-blue-600 text-white px-3 py-1 rounded">Save</button>
        </form>
      </td>
    </tr>
    {% else %}
    <tr><td class="p-3 text-gray-500" colspan="5">No submissions yet.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
